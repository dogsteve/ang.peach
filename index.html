<!DOCTYPE html>
<html>

<head>
    <title>K√≠nh g·ª≠i Mai Anh y√™u d·∫•u</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Jersey+10+Charted&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
        rel="stylesheet">
    <style>
        html * {
            font-family: "Kanit", sans-serif;
            font-weight: 500;
            font-size: 30px;
            font-style: normal;
        }

        .center {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
            padding: 15%;
        }

        .center-full {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: 0;
            padding: 0;
        }

        .center-alt {
            margin: auto;
            width: 50%;
            height: 50%;
            padding: 10px;
        }

        .full-screen {
            height: 100vh;
            position: relative;
        }

        .table-cell {
            width: 100%;
            height: 100%;
        }

        .candle {
            width: 100px;
            height: 40%;
        }

        .lighter {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div class="full-screen main-screen">
        <div class="greeting center" , style="display: none;">
            <p>
                Ch√†o My Anh, chuy·ªán l√† t·ªõ kh√¥ng th·ªÉ t√¨m n·ªïi c·∫≠u gi·ªØa l√≤ng th·ªß ƒë√¥, v√¨ th·∫ø n√™n t·ªõ s·∫Ω d√πng internet ƒë·ªÉ g·ª≠i
                c·∫≠u c√°i n√†y, c·∫≠u
                ph·∫£i nh·∫≠n ·∫•y nh√©!
            </p>
        </div>
        <div class="cacke center-full" , style="top: 50%; border-radius: 10%; display: none;">
            <table class="center-alt">
                <tr>
                    <th>
                        <div class="draggable table-cell" , style="background-color: coral;"></div>
                    </th>
                    <th>
                        <div class="draggable table-cell" , style="background-color: aquamarine;"></div>
                    </th>
                    <th>
                        <div class="draggable table-cell" , style="background-color: chocolate;"></div>
                    </th>
                </tr>
                <tr>
                    <td>
                        <div class="draggable table-cell" , style="background-color: darkgoldenrod;"></div>
                    </td>
                    <td>
                        <div class="draggable table-cell" , style="background-color: blueviolet;"></div>
                    </td>
                    <td>
                        <div class="draggable table-cell" , style="background-color: thistle;"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="draggable table-cell" , style="background-color: blanchedalmond;"></div>
                    </td>
                    <td>
                        <div class="draggable table-cell" , style="background-color: peachpuff;"></div>
                    </td>
                    <td>
                        <div class="draggable table-cell" , style="background-color: palevioletred;"></div>
                    </td>
                </tr>
            </table>
            <div style="width: 100%; text-align: center;">
                <a class="center-alt" , style="font-size: 20px;">B√°nh sinh nh·∫≠t, n·∫øn t·ªõ ƒë·ªÉ ·ªü b√™n d∆∞·ªõi, c·∫≠u k√©o n√≥ c·∫Øm
                    l√™n b√°nh nh√°</a>
            </div>
            <div class="center-alt"">
                <table style=" width: 40%; height: 100%; text-align: center;">
                <tr>
                    <th>
                        <div class="draggable-candle candle-1 table-cell candle" ,
                            style="background-color: chocolate; width: 40%;">
                        </div>
                        <a style="font-size: 20px;">N·∫øn</a>
                    </th>
                    <th>
                        <div class="draggable-candle candle-2 table-cell candle" ,
                            style="background-color: chocolate; width: 40%;">
                        </div>
                        <a style="font-size: 20px;">N·∫øn</a>
                    </th>
                    <th>
                        <div class="draggable-candle candle-2 table-cell candle" ,
                            style="background-color: chocolate; width: 40%;">
                        </div>
                        <a style="font-size: 20px;">N·∫øn</a>
                    </th>
                    <th>
                        <div class="draggable-lighter table-cell candle" , style="background-color: yellow; width: 40%;"
                            , title="B·∫≠t l·ª≠a">
                        </div>
                        <a style="font-size: 20px;">B·∫≠t l·ª≠a</a>
                    </th>
                </tr>
                </table>
            </div>
        </div>
        <div class="button">
            <button>
                Th·ªïi n·∫øn
            </button>
        </div>
    </div>
    <div class="full-screen final-greeting" style="display: none;">
        <canvas width="1200px" height="1200px" id="pinkboard"></canvas>
        <p
            style="position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 10; padding: 20%; text-shadow: 2px 2px white;">
            Ch√∫c Anh, My
            Anh, Little
            Almond aka N√≠
            sinh nh·∫≠t h·∫°nh ph√∫c, vui v·∫ª, sung s∆∞·ªõng.
            C√≥ c·∫≠u tr√™n ƒë·ªùi th·∫≠t t·ªët
            cho s·ª©c kh·ªèe, ƒë·∫∑c bi·ªát l√† gia ƒë√¨nh c·∫≠u v√† t·ªõ.</p>
    </div>
</body>

<script>

    /* setTimeout(() => {
        const box = document.getElementById('middle1');

        // üëáÔ∏è removes element from DOM
        box.style.display = 'none';

        // üëáÔ∏è hides element (still takes up space on page)
        // box.style.visibility = 'hidden';
    }, 5000);

    setTimeout(() => {
        const box = document.getElementById('middle');

        // üëáÔ∏è removes element from DOM
        box.style.display = 'block';

        // üëáÔ∏è hides element (still takes up space on page)
        // box.style.visibility = 'hidden';
    }, 10000); */

    var settings = {
        particles: {
            length: 500, // maximum amount of particles

            duration: 2, // particle duration in sec

            velocity: 100, // particle velocity in pixels/sec

            effect: -0.75, // play with this for a nice effect

            size: 30, // particle size in pixels
        },
    };

    /*
  
  * RequestAnimationFrame polyfill by Erik M√∂ller
  
  */

    (function () {
        var b = 0;
        var c = ["ms", "moz", "webkit", "o"];
        for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
            window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
            window.cancelAnimationFrame =
                window[c[a] + "CancelAnimationFrame"] ||
                window[c[a] + "CancelRequestAnimationFrame"];
        }
        if (!window.requestAnimationFrame) {
            window.requestAnimationFrame = function (h, e) {
                var d = new Date().getTime();
                var f = Math.max(0, 16 - (d - b));
                var g = window.setTimeout(function () {
                    h(d + f);
                }, f);
                b = d + f;
                return g;
            };
        }
        if (!window.cancelAnimationFrame) {
            window.cancelAnimationFrame = function (d) {
                clearTimeout(d);
            };
        }
    })();

    /*
  
  * Point class
  
  */

    var Point = (function () {
        function Point(x, y) {
            this.x = typeof x !== "undefined" ? x : 0;

            this.y = typeof y !== "undefined" ? y : 0;
        }

        Point.prototype.clone = function () {
            return new Point(this.x, this.y);
        };

        Point.prototype.length = function (length) {
            if (typeof length == "undefined")
                return Math.sqrt(this.x * this.x + this.y * this.y);

            this.normalize();

            this.x *= length;

            this.y *= length;

            return this;
        };

        Point.prototype.normalize = function () {
            var length = this.length();

            this.x /= length;

            this.y /= length;

            return this;
        };

        return Point;
    })();

    /*
  
  * Particle class
  
  */

    var Particle = (function () {
        function Particle() {
            this.position = new Point();

            this.velocity = new Point();

            this.acceleration = new Point();

            this.age = 0;
        }

        Particle.prototype.initialize = function (x, y, dx, dy) {
            this.position.x =
                x +
                (window.innerWidth > 1024
                    ? window.innerWidth / 6
                    : window.innerWidth / 2.8);

            this.position.y = y;

            this.velocity.x = dx;

            this.velocity.y = dy;

            this.acceleration.x = dx * settings.particles.effect;

            this.acceleration.y = dy * settings.particles.effect;

            this.age = 0;
        };

        Particle.prototype.update = function (deltaTime) {
            this.position.x += this.velocity.x * deltaTime;

            this.position.y += this.velocity.y * deltaTime;

            this.velocity.x += this.acceleration.x * deltaTime;

            this.velocity.y += this.acceleration.y * deltaTime;

            this.age += deltaTime;
        };

        Particle.prototype.draw = function (context, image) {
            function ease(t) {
                return --t * t * t + 1;
            }

            var size = image.width * ease(this.age / settings.particles.duration);

            context.globalAlpha = 1 - this.age / settings.particles.duration;

            context.drawImage(
                image,
                this.position.x - size / 2,
                this.position.y - size / 2,
                size,
                size
            );
        };

        return Particle;
    })();

    /*
  
  * ParticlePool class
  
  */

    var ParticlePool = (function () {
        var particles,
            firstActive = 0,
            firstFree = 0,
            duration = settings.particles.duration;

        function ParticlePool(length) {
            // create and populate particle pool

            particles = new Array(length);

            for (var i = 0; i < particles.length; i++)
                particles[i] = new Particle();
        }

        ParticlePool.prototype.add = function (x, y, dx, dy) {
            particles[firstFree].initialize(x, y, dx, dy);

            // handle circular queue

            firstFree++;

            if (firstFree == particles.length) firstFree = 0;

            if (firstActive == firstFree) firstActive++;

            if (firstActive == particles.length) firstActive = 0;
        };

        ParticlePool.prototype.update = function (deltaTime) {
            var i;

            // update active particles

            if (firstActive < firstFree) {
                for (i = firstActive; i < firstFree; i++)
                    particles[i].update(deltaTime);
            }

            if (firstFree < firstActive) {
                for (i = firstActive; i < particles.length; i++)
                    particles[i].update(deltaTime);

                for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
            }

            // remove inactive particles

            while (
                particles[firstActive].age >= duration &&
                firstActive != firstFree
            ) {
                firstActive++;

                if (firstActive == particles.length) firstActive = 0;
            }
        };

        ParticlePool.prototype.draw = function (context, image) {
            // draw active particles

            if (firstActive < firstFree) {
                for (i = firstActive; i < firstFree; i++)
                    particles[i].draw(context, image);
            }

            if (firstFree < firstActive) {
                for (i = firstActive; i < particles.length; i++)
                    particles[i].draw(context, image);

                for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
            }
        };

        return ParticlePool;
    })();

    /*
  
  * Putting it all together
  
  */

    (function (canvas) {
        var context = canvas.getContext("2d"),
            particles = new ParticlePool(settings.particles.length),
            particleRate = settings.particles.length / settings.particles.duration, // particles/sec
            time;

        // get point on heart with -PI <= t <= PI

        function pointOnHeart(t) {
            return new Point(
                160 * Math.pow(Math.sin(t), 3),

                130 * Math.cos(t) -
                50 * Math.cos(2 * t) -
                20 * Math.cos(3 * t) -
                10 * Math.cos(4 * t) +
                25
            );
        }

        // creating the particle image using a dummy canvas

        var image = (function () {
            var canvas = document.createElement("canvas"),
                context = canvas.getContext("2d");

            canvas.width = settings.particles.size;

            canvas.height = settings.particles.size;

            // helper function to create the path

            function to(t) {
                var point = pointOnHeart(t);

                point.x =
                    settings.particles.size / 2 +
                    (point.x * settings.particles.size) / 350;

                point.y =
                    settings.particles.size / 2 -
                    (point.y * settings.particles.size) / 350;

                return point;
            }

            // create the path

            context.beginPath();

            var t = -Math.PI;

            var point = to(t);

            context.moveTo(point.x, point.y);

            while (t < Math.PI) {
                t += 0.01; // baby steps!

                point = to(t);

                context.lineTo(point.x, point.y);
            }

            context.closePath();

            // create the fill

            context.fillStyle = "#F30D4C";

            context.fill();

            // create the image

            var image = new Image();

            image.src = canvas.toDataURL();

            return image;
        })();

        // render that thing!

        function render() {
            // next animation frame

            requestAnimationFrame(render);

            // update time

            var newTime = new Date().getTime() / 1000,
                deltaTime = newTime - (time || newTime);

            time = newTime;

            // clear canvas

            context.clearRect(0, 0, canvas.width, canvas.height);

            // create new particles

            var amount = particleRate * deltaTime;

            for (var i = 0; i < amount; i++) {
                var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());

                var dir = pos.clone().length(settings.particles.velocity);

                particles.add(
                    canvas.width / 2 + pos.x,
                    canvas.height / 2 - pos.y,
                    dir.x,
                    -dir.y
                );
            }

            // update and draw particles

            particles.update(deltaTime);

            particles.draw(context, image);
        }

        // handle (re-)sizing of the canvas

        function onResize() {
            canvas.width =
                canvas.clientWidth > 1024
                    ? canvas.clientWidth * 1.7
                    : canvas.clientWidth * 2.3;

            canvas.height =
                canvas.clientWidth > 1024
                    ? canvas.clientHeight * 1.7
                    : canvas.clientHeight * 2.3;
        }

        // delay rendering bootstrap

        setTimeout(function () {
            render();
        }, 0);
    })(document.getElementById("pinkboard"));

    $(document).ready(() => {
        $(".button").hide();
        $(".button").click(() => {
            $(".main-screen").hide();
            $(".final-greeting").fadeIn(3000);
        });
        $(".greeting").fadeIn(3000).fadeOut(6000);
        var candlePos = []
        $(".cacke").fadeIn(10000);
        $(".draggable-candle").draggable({
            drag: (event, ui) => {
                candlePos = []
                $(".draggable-candle").map(
                    function () {
                        var pos = $(this).offset();
                        candlePos.push(pos);
                    }
                )
                console.log(candlePos)
            }
        });
        var isCandle1 = false;
        var isCandle2 = false;
        var isCandle3 = false;
        $(".draggable-lighter").draggable({
            drag: (event, ui) => {
                var currentOffset = ui.offset;
                console.log(currentOffset);
                for (let i = 1; i <= 3; i++) {
                    var candle = candlePos[i - 1];
                    console.log(candle)
                    var top = currentOffset.top;
                    var left = currentOffset.left;
                    var cTop = candle.top;
                    var cLeft = candle.left;
                    if (top <= cTop && left <= cLeft) {
                        if (i == 1) {
                            isCandle1 = true;
                        }
                        if (i == 2) {
                            isCandle2 = true;
                        }
                        if (i == 3) {
                            isCandle3 = true;
                        }
                        var queryClass = ".candle-" + i;
                        console.log(queryClass);
                        $(queryClass).css("background-color", "yellow");
                    }
                    if (isCandle1 && isCandle2 && isCandle3) {
                        $(".button").show();
                    }
                }
            }
        });
    })
</script>

</html>